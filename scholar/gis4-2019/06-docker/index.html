<!DOCTYPE html>
<html><head>
  <title>
      
          Docker - henyxia&#39;s website
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Jean Wasilewski" />
  <link rel="shortcut icon" type="image/x-icon" href="https://henyxia.github.io/img/favicon.ico">

  
  
  <link rel="stylesheet" href="https://henyxia.github.io/css/style-pulse.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  <meta property="og:title" content="Docker" />
<meta property="og:description" content="What is Docker?  Isolation technology allowing to run a software within the same kernel as the host A separated process namespace is created for this purpose Docker run images, which are a full snapshot of applications (with their dependencies if needed) Images can be ran anywhere, no matter the operating system used Many base images have already been build by the community and hosted in Docker Hub  Docker basics Pull an image $ docker pull nginx:latest latest: Pulling from library/nginx b8f262c62ec6: Pull complete a6639d774c21: Pull complete 22a7aa8442bf: Pull complete Digest: sha256:9688d0dae8812dd2437947b756393eb0779487e361aa2ffbc3a529dca61f102c Status: Downloaded newer image for nginx:latest  Docker basics Start an image detached $ docker run -it nginx:latest # detach with ^C-P ^C-Q  Start an image attached $ docker run -d nginx:latest 39a0263258f66217fc751aeb799b586d9d14b709f6d2a5dbd502afaa7e89b636  Docker basics List containers $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b9568988ad7a nginx:latest &quot;nginx -g &#39;daemon of…&quot; 3 minutes ago Up 3 minutes 80/tcp agitated_feynman 39a0263258f6 nginx:latest &quot;nginx -g &#39;daemon of…&quot; 4 minutes ago Up 4 minutes 80/tcp suspicious_bardeen  Docker basics Show logs of a container $ docker logs 309fdd3451a9 Initializing Gerrit site ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://henyxia.github.io/scholar/gis4-2019/06-docker/" />

<meta itemprop="name" content="Docker">
<meta itemprop="description" content="What is Docker?  Isolation technology allowing to run a software within the same kernel as the host A separated process namespace is created for this purpose Docker run images, which are a full snapshot of applications (with their dependencies if needed) Images can be ran anywhere, no matter the operating system used Many base images have already been build by the community and hosted in Docker Hub  Docker basics Pull an image $ docker pull nginx:latest latest: Pulling from library/nginx b8f262c62ec6: Pull complete a6639d774c21: Pull complete 22a7aa8442bf: Pull complete Digest: sha256:9688d0dae8812dd2437947b756393eb0779487e361aa2ffbc3a529dca61f102c Status: Downloaded newer image for nginx:latest  Docker basics Start an image detached $ docker run -it nginx:latest # detach with ^C-P ^C-Q  Start an image attached $ docker run -d nginx:latest 39a0263258f66217fc751aeb799b586d9d14b709f6d2a5dbd502afaa7e89b636  Docker basics List containers $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b9568988ad7a nginx:latest &quot;nginx -g &#39;daemon of…&quot; 3 minutes ago Up 3 minutes 80/tcp agitated_feynman 39a0263258f6 nginx:latest &quot;nginx -g &#39;daemon of…&quot; 4 minutes ago Up 4 minutes 80/tcp suspicious_bardeen  Docker basics Show logs of a container $ docker logs 309fdd3451a9 Initializing Gerrit site .">



<meta itemprop="wordCount" content="731">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker"/>
<meta name="twitter:description" content="What is Docker?  Isolation technology allowing to run a software within the same kernel as the host A separated process namespace is created for this purpose Docker run images, which are a full snapshot of applications (with their dependencies if needed) Images can be ran anywhere, no matter the operating system used Many base images have already been build by the community and hosted in Docker Hub  Docker basics Pull an image $ docker pull nginx:latest latest: Pulling from library/nginx b8f262c62ec6: Pull complete a6639d774c21: Pull complete 22a7aa8442bf: Pull complete Digest: sha256:9688d0dae8812dd2437947b756393eb0779487e361aa2ffbc3a529dca61f102c Status: Downloaded newer image for nginx:latest  Docker basics Start an image detached $ docker run -it nginx:latest # detach with ^C-P ^C-Q  Start an image attached $ docker run -d nginx:latest 39a0263258f66217fc751aeb799b586d9d14b709f6d2a5dbd502afaa7e89b636  Docker basics List containers $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES b9568988ad7a nginx:latest &quot;nginx -g &#39;daemon of…&quot; 3 minutes ago Up 3 minutes 80/tcp agitated_feynman 39a0263258f6 nginx:latest &quot;nginx -g &#39;daemon of…&quot; 4 minutes ago Up 4 minutes 80/tcp suspicious_bardeen  Docker basics Show logs of a container $ docker logs 309fdd3451a9 Initializing Gerrit site ."/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-146517157-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>
<body><nav class="navbar is-transparent is-fixed-top is-info">
  <div class="navbar-brand">
  <a class="navbar-item" href="https://henyxia.github.io/scholar">
      SCHOLAR>
    </a>
    <div class="navbar-burger burger" data-target="navbarExampleTransparentExample">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="navbarExampleTransparentExample" class="navbar-menu">
    <div class="navbar-start">
      <div class="navbar-item" href="https://bulma.io/">
        Docker
      </div>
    </div>
  </div>
</nav>


<br />
<br />
<br />
<br />

<div class="tile is-ancestor">
  <div class="tile is-vertical is-2">
    <div class="tile">
      <div class="tile is-parent">
        <article class="tile is-child">

<ul class="menu-list">
  
  
    
  
  
    
      <li class="">
        
        <p class="menu-label">Projects</p>
        
        <ul class="sub-menu">
          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/projects/soon/">Soon...</a>
        
      </li>
    
  

          
        </ul>
      </li>
    
  

  
    
  
  
    
      <li class="">
        
        <p class="menu-label">Notes</p>
        
        <ul class="sub-menu">
          
            
  
  
    
      <li class="">
        
        <p class="menu-label">Ceph</p>
        
        <ul class="sub-menu">
          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/notes/ceph/create-osd/">Creation</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/notes/ceph/remove-osd/">Deletion</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/notes/ceph/tuning-osd/">Tuning</a>
        
      </li>
    
  

          
        </ul>
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <p class="menu-label">IPMI</p>
        
        <ul class="sub-menu">
          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/notes/ipmi/basics/">Basics</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/notes/ipmi/kernel-module/">kernel modules</a>
        
      </li>
    
  

          
        </ul>
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/notes/raid/">Soft RAID</a>
        
      </li>
    
  

          
        </ul>
      </li>
    
  

  
    
  
  
    
      <li class="active">
        
        <p class="menu-label">Scholar</p>
        
        <ul class="sub-menu">
          
            
  
  
    
      <li class="active">
        
        <p class="menu-label">GIS4 - 2019</p>
        
        <ul class="sub-menu">
          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/00-intro/">Presentation</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/01-reminders/">Reminders</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/02-network/">Network commands</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/03-vlan/">VLAN definition</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/04-cisco/">Cisco presentation</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/05-system-administration/">Sys admin</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="active">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/06-docker/">Docker</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/07-haproxy/">HAProxy</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/08-nomad/">Nomad</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/09-consul/">Consul</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/10-proxmox/">Proxmox</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/11-ansible/">Ansible</a>
        
      </li>
    
  

          
            
  
  
    
      <li class="">
        
        <a href="https://henyxia.github.io/scholar/gis4-2019/12-tutorials/">Tutorials</a>
        
      </li>
    
  

          
        </ul>
      </li>
    
  

          
        </ul>
      </li>
    
  

  
</ul>

</aside>

        </article>
      </div>
    </div>
  </div>
  <div class="tile is-parent">
    <article class="tile is-child notification">
      <div class="content">
        <div class="content">
          
	  

<h1 id="what-is-docker">What is Docker?</h1>

<ul>
<li>Isolation technology allowing to run a software within the same kernel as the host</li>
<li>A separated process namespace is created for this purpose</li>
<li>Docker run images, which are a full snapshot of applications (with their dependencies if needed)</li>
<li>Images can be ran anywhere, no matter the operating system used</li>
<li>Many base images have already been build by the community and hosted in Docker Hub</li>
</ul>

<hr />

<h1 id="docker-basics">Docker basics</h1>

<h3 id="pull-an-image">Pull an image</h3>

<pre><code>$ docker pull nginx:latest
latest: Pulling from library/nginx
b8f262c62ec6: Pull complete
a6639d774c21: Pull complete
22a7aa8442bf: Pull complete
Digest: sha256:9688d0dae8812dd2437947b756393eb0779487e361aa2ffbc3a529dca61f102c
Status: Downloaded newer image for nginx:latest
</code></pre>

<hr />

<h1 id="docker-basics-1">Docker basics</h1>

<h3 id="start-an-image-detached">Start an image detached</h3>

<pre><code>$ docker run -it nginx:latest
# detach with ^C-P ^C-Q
</code></pre>

<h3 id="start-an-image-attached">Start an image attached</h3>

<pre><code>$ docker run -d nginx:latest
39a0263258f66217fc751aeb799b586d9d14b709f6d2a5dbd502afaa7e89b636
</code></pre>

<hr />

<h1 id="docker-basics-2">Docker basics</h1>

<h3 id="list-containers">List containers</h3>

<pre><code>$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
b9568988ad7a        nginx:latest        &quot;nginx -g 'daemon of…&quot;   3 minutes ago       Up 3 minutes        80/tcp              agitated_feynman
39a0263258f6        nginx:latest        &quot;nginx -g 'daemon of…&quot;   4 minutes ago       Up 4 minutes        80/tcp              suspicious_bardeen
</code></pre>

<hr />

<h1 id="docker-basics-3">Docker basics</h1>

<h3 id="show-logs-of-a-container">Show logs of a container</h3>

<pre><code>$ docker logs 309fdd3451a9
Initializing Gerrit site ...
Generating SSH host key ... rsa... ed25519... ecdsa 256... ecdsa 384... ecdsa 521... done
Initialized /var/gerrit
Reindexing projects:    100% (2/2)
Reindexed 2 documents in projects index in 0.3s (7.4/s)
[2019-09-11 13:27:14,517] [main] INFO  com.google.gerrit.server.git.LocalDiskRepositoryManager : Defaulting core.streamFileThreshold to 866m
[2019-09-11 13:27:15,890] [main] INFO  com.google.gerrit.server.cache.h2.H2CacheFactory : Enabling disk cache /var/gerrit/cache
[2019-09-11 13:27:16,091] [main] INFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for 'WorkQueue' queue
[2019-09-11 13:27:16,108] [main] INFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for 'Index-Interactive' queue
[2019-09-11 13:27:16,117] [main] INFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for 'Index-Batch' queue
[2019-09-11 13:27:16,178] [main] INFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for 'ReceiveCommits' queue
[2019-09-11 13:27:16,179] [main] INFO  com.google.gerrit.server.git.WorkQueue : Adding metrics for 'SendEmail' queue
[2019-09-11 13:27:16,259] [main] INFO  com.google.gerrit.server.rules.PrologEnvironment : reductionLimit: 100000, compileLimit: 1000000
[2019-09-11 13:27:16,833] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loading plugins from /var/gerrit/plugins
[2019-09-11 13:27:16,908] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin avatars-gravatar, version 381fc84a89
[2019-09-11 13:27:16,941] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin codemirror-editor, version v3.0.1
[2019-09-11 13:27:16,966] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin commit-message-length-validator, version v3.0.1
[2019-09-11 13:27:16,995] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin delete-project, version v3.0.1
[2019-09-11 13:27:17,026] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin download-commands, version v3.0.1
[2019-09-11 13:27:17,065] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin gitiles, version v3.0.1
[2019-09-11 13:27:17,094] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin hooks, version v3.0.1
[2019-09-11 13:27:17,118] [main] INFO  com.google.gerrit.server.plugins.PluginLoader : Loaded plugin plugin-manager, version v3.0.1
</code></pre>

<hr />

<h1 id="docker-basics-4">Docker basics</h1>

<h3 id="stop-a-container">Stop a container</h3>

<pre><code>$ docker stop 39a0263258f6
39a0263258f6
</code></pre>

<h3 id="delete-a-container">Delete a container</h3>

<pre><code>$ docker rm 39a0263258f6
39a0263258f6
</code></pre>

<hr />

<h1 id="docker-basics-5">Docker basics</h1>

<h3 id="get-container-ip">Get container IP</h3>

<pre><code>$ docker inspect unruffled_goldstine |grep IP
            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,
            &quot;LinkLocalIPv6PrefixLen&quot;: 0,
            &quot;SecondaryIPAddresses&quot;: null,
            &quot;SecondaryIPv6Addresses&quot;: null,
            &quot;GlobalIPv6Address&quot;: &quot;&quot;,
            &quot;GlobalIPv6PrefixLen&quot;: 0,
            &quot;IPAddress&quot;: &quot;100.64.0.2&quot;,
            &quot;IPPrefixLen&quot;: 24,
            &quot;IPv6Gateway&quot;: &quot;&quot;,
                    &quot;IPAMConfig&quot;: null,
                    &quot;IPAddress&quot;: &quot;100.64.0.2&quot;,
                    &quot;IPPrefixLen&quot;: 24,
                    &quot;IPv6Gateway&quot;: &quot;&quot;,
                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,
                    &quot;GlobalIPv6PrefixLen&quot;: 0,
</code></pre>

<hr />

<h1 id="docker-basics-6">Docker basics</h1>

<h3 id="execute-another-processus-inside-the-container">Execute another processus inside the container</h3>

<pre><code>$ docker exec -it unruffled_goldstine bash
root@cb651a07bbde:/#
</code></pre>

<hr />

<h1 id="dockerfile-files">Dockerfile files</h1>

<p>Description of how the image should be built</p>

<pre><code>FROM php:7.3-fpm-buster

RUN apt update &amp;&amp; apt install -y --no-install-recommends wget curl git wget snmp unzip

COPY ./docker/base/fpm/resources/php.ini /usr/local/etc/php/php.ini

COPY ./docker/base/fpm/resources/entrypoint.sh /entrypoint

USER www-data

WORKDIR &quot;/application&quot;

ENTRYPOINT [&quot;/entrypoint&quot;]
</code></pre>

<hr />

<h1 id="dockerfile-builds">Dockerfile builds</h1>

<p>Description of how the image should be built</p>

<pre><code>$ docker build -t my-image:v0.1 .
Digest: sha256:0edcfe1b610d878c8fbc036bdc68380e0ca102be6a250d139c5bd3669ba63c10
Sending build context to Docker daemon  56.14MB

Step 1/15 : FROM php:7.3-fpm-buster
7.3-fpm-buster: Pulling from library/php
Digest: sha256:23b1ecb3e4144c132f126d7dd4dab1e8215e7645c690edef0a40964749d4500b
Status: Image is up to date for php:7.3-fpm-buster
 ---&gt; d2f084c97289
Step 2/15 : RUN apt update ...
 ---&gt; Using cache
 ---&gt; d131535f4e6d
Step 3/15 : COPY ./docker/base/fpm/resources/php.ini /usr/local/etc/php/php.ini
...
</code></pre>

<hr />

<h1 id="docker-images-list">Docker images list</h1>

<pre><code>$ docker images
REPOSITORY                                                      TAG                                        IMAGE ID            CREATED             SIZE
my-image                                                        v0.1                                       ffa3e8f1253b        1 hour ago          12.7MB
nginx                                                           latest                                     ab56bba91343        4 days ago          126MB
php                                                             7.3-fpm-buster                             7d3076bd7d18        13 days ago         401MB
netboxcommunity/netbox                                          latest                                     4235b672902f        2 weeks ago         574MB
bitnami/redis                                                   5.0-debian-9                               4728a00b0b66        2 weeks ago         96.6MB
cleveritcz/oncall                                               latest                                     6c54dc35833b        3 weeks ago         784MB
redis                                                           4-alpine                                   442c73e7ad1d        3 weeks ago         20.4MB
nginx                                                           &lt;none&gt;                                     5a3221f0137b        4 weeks ago         126MB
debian                                                          stable                                     f5356914cf3c        4 weeks ago         114MB
debian                                                          buster                                     85c4fd36a543        4 weeks ago         114MB
netboxcommunity/netbox                                          v2.6.2-ldap                                dd8a992d667f        6 weeks ago         577MB
goalert/all-in-one                                              latest                                     c7bba1104fc0        7 weeks ago         149MB
alpine                                                          latest                                     b7b28af77ffe        2 months ago        5.58MB
gerritcodereview/gerrit                                         latest                                     514d2781f71d        2 months ago        564MB
nginx                                                           1.15-alpine                                dd025cdfe837        4 months ago        16.1MB
domistyle/idrac6                                                latest                                     21e598472b60        5 months ago        545MB
dictcp/oncall                                                   latest                                     1a46b171ebe1        12 months ago       715MB
postgres                                                        10.4-alpine                                962ed899c609        13 months ago       72.9MB
</code></pre>

<hr />

<h1 id="publish-image-on-registry">Publish image on registry</h1>

<h3 id="publish-and-push">Publish and push</h3>

<pre><code>$ docker tag my-image:v0.1 registry-host:5000/myteam/my-image

$ docker push registry-host:5000/myteam/my-image
</code></pre>

<h3 id="pull-from-anywhere">Pull from anywhere</h3>

<pre><code>$ docker pull registry-host:5000/myteam/my-image
</code></pre>

        </div>
      </div>
    </article>
  </div>
</div>

  </body>
</html>
